<template>
    <div class="custom-card-container">
        <!-- Card header -->
        <div class="custom-card-header">
            <span class="custom-card-title">{cardTitle}</span>
        </div>

        <div class="custom-card-body">
            <!-- If there are records, render the datatable + toggle button -->
            <template if:true={hasRecords}>
                <lightning-datatable
                    key-field="Id"
                    data={displayedData}
                    columns={columns}
                    hide-checkbox-column
                    column-widths-mode="fixed"
                    class="custom-datatable"
                ></lightning-datatable>

                <div class="custom-card-footer">
                    <lightning-button
                        label={toggleLabel}
                        variant="neutral"
                        onclick={handleToggle}
                        class="custom-view-all-btn"
                    ></lightning-button>
                </div>
            </template>

            <!-- If there was an error, show it -->
            <template if:true={error}>
                <div class="custom-no-data">
                    <lightning-formatted-text value={error}></lightning-formatted-text>
                </div>
            </template>

            <!-- If no records and no error, show “No related records found.” -->
            <template if:true={noRecordsNoError}>
                <div class="custom-no-data">
                    <lightning-formatted-text value="No related records found."></lightning-formatted-text>
                </div>
            </template>
        </div>
    </div>
</template>
